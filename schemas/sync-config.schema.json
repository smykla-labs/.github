{
  "$defs": {
    "BranchProtectionRuleConfig": {
      "additionalProperties": false,
      "properties": {
        "allow_deletions": {
          "type": "boolean"
        },
        "allow_force_pushes": {
          "type": "boolean"
        },
        "enforce_admins": {
          "type": "boolean"
        },
        "pattern": {
          "minLength": 1,
          "type": "string"
        },
        "require_linear_history": {
          "type": "boolean"
        },
        "required_conversation_resolution": {
          "type": "boolean"
        },
        "required_reviews": {
          "$ref": "#/$defs/RequiredReviews"
        },
        "required_status_checks": {
          "$ref": "#/$defs/RequiredStatusChecks"
        },
        "restrictions": {
          "$ref": "#/$defs/BranchRestrictionsConfig"
        }
      },
      "required": [
        "pattern"
      ],
      "type": "object"
    },
    "BranchRestrictionsConfig": {
      "additionalProperties": false,
      "properties": {
        "apps": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "teams": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "users": {
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "type": "object"
    },
    "BypassActorConfig": {
      "additionalProperties": false,
      "properties": {
        "actor_id": {
          "type": "integer"
        },
        "actor_type": {
          "enum": [
            "Integration",
            "OrganizationAdmin",
            "RepositoryRole",
            "Team"
          ],
          "type": "string"
        },
        "bypass_mode": {
          "enum": [
            "always",
            "pull_request"
          ],
          "type": "string"
        }
      },
      "required": [
        "actor_id",
        "actor_type",
        "bypass_mode"
      ],
      "type": "object"
    },
    "BypassPullRequestAllowances": {
      "additionalProperties": false,
      "properties": {
        "apps": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "teams": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "users": {
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "type": "object"
    },
    "CodeScanningRuleConfig": {
      "additionalProperties": false,
      "properties": {
        "code_scanning_tools": {
          "items": {
            "$ref": "#/$defs/CodeScanningToolConfig"
          },
          "type": "array"
        }
      },
      "type": "object"
    },
    "CodeScanningToolConfig": {
      "additionalProperties": false,
      "properties": {
        "alerts_threshold": {
          "enum": [
            "none",
            "errors",
            "errors_and_warnings",
            "all"
          ],
          "type": "string"
        },
        "security_alerts_threshold": {
          "enum": [
            "none",
            "critical",
            "high_or_higher",
            "medium_or_higher",
            "all"
          ],
          "type": "string"
        },
        "tool": {
          "minLength": 1,
          "type": "string"
        }
      },
      "required": [
        "tool",
        "alerts_threshold",
        "security_alerts_threshold"
      ],
      "type": "object"
    },
    "FeaturesConfig": {
      "additionalProperties": false,
      "properties": {
        "has_discussions": {
          "type": "boolean"
        },
        "has_issues": {
          "type": "boolean"
        },
        "has_projects": {
          "type": "boolean"
        },
        "has_wiki": {
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "FileMergeConfig": {
      "additionalProperties": false,
      "properties": {
        "overrides": {
          "type": "object"
        },
        "path": {
          "examples": [
            "renovate.json",
            ".github/dependabot.yml"
          ],
          "minLength": 1,
          "pattern": "^[^/].*$",
          "type": "string"
        },
        "strategy": {
          "default": "deep-merge",
          "enum": [
            "deep-merge",
            "shallow-merge",
            "overlay"
          ],
          "type": "string"
        }
      },
      "required": [
        "path",
        "overrides"
      ],
      "type": "object"
    },
    "FilesConfig": {
      "additionalProperties": false,
      "properties": {
        "allow_removal": {
          "default": false,
          "type": "boolean"
        },
        "exclude": {
          "examples": [
            [
              "CONTRIBUTING.md",
              "CODE_OF_CONDUCT.md"
            ],
            [
              ".github/PULL_REQUEST_TEMPLATE.md",
              "SECURITY.md"
            ]
          ],
          "items": {
            "minLength": 1,
            "pattern": "^[^/].*$",
            "type": "string"
          },
          "type": "array",
          "uniqueItems": true
        },
        "merge": {
          "items": {
            "$ref": "#/$defs/FileMergeConfig"
          },
          "type": "array"
        },
        "skip": {
          "default": false,
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "LabelsConfig": {
      "additionalProperties": false,
      "properties": {
        "allow_removal": {
          "default": false,
          "type": "boolean"
        },
        "exclude": {
          "examples": [
            [
              "ci/skip-tests",
              "ci/force-full"
            ],
            [
              "release/major",
              "release/minor",
              "release/patch"
            ]
          ],
          "items": {
            "minLength": 1,
            "type": "string"
          },
          "type": "array",
          "uniqueItems": true
        },
        "skip": {
          "default": false,
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "PullRequestRuleConfig": {
      "additionalProperties": false,
      "properties": {
        "allowed_merge_methods": {
          "items": {
            "enum": [
              "squash",
              "merge",
              "rebase"
            ],
            "type": "string"
          },
          "type": "array",
          "uniqueItems": true
        },
        "dismiss_stale_reviews_on_push": {
          "type": "boolean"
        },
        "require_code_owner_review": {
          "type": "boolean"
        },
        "require_last_push_approval": {
          "type": "boolean"
        },
        "required_approving_review_count": {
          "maximum": 6,
          "minimum": 0,
          "type": "integer"
        },
        "required_review_thread_resolution": {
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "RefNameCondition": {
      "additionalProperties": false,
      "properties": {
        "exclude": {
          "items": {
            "minLength": 1,
            "pattern": "^refs/",
            "type": "string"
          },
          "type": "array",
          "uniqueItems": true
        },
        "include": {
          "items": {
            "minLength": 1,
            "pattern": "^refs/",
            "type": "string"
          },
          "type": "array",
          "uniqueItems": true
        }
      },
      "type": "object"
    },
    "RepositorySettingsConfig": {
      "additionalProperties": false,
      "properties": {
        "allow_auto_merge": {
          "type": "boolean"
        },
        "allow_merge_commit": {
          "type": "boolean"
        },
        "allow_rebase_merge": {
          "type": "boolean"
        },
        "allow_squash_merge": {
          "type": "boolean"
        },
        "allow_update_branch": {
          "type": "boolean"
        },
        "delete_branch_on_merge": {
          "type": "boolean"
        },
        "squash_merge_commit_message": {
          "enum": [
            "PR_BODY",
            "COMMIT_MESSAGES",
            "BLANK"
          ],
          "type": "string"
        },
        "squash_merge_commit_title": {
          "enum": [
            "COMMIT_OR_PR_TITLE",
            "PR_TITLE"
          ],
          "type": "string"
        }
      },
      "type": "object"
    },
    "RequiredReviews": {
      "additionalProperties": false,
      "properties": {
        "bypass_pull_request_allowances": {
          "$ref": "#/$defs/BypassPullRequestAllowances"
        },
        "count": {
          "maximum": 6,
          "minimum": 0,
          "type": "integer"
        },
        "dismiss_stale": {
          "type": "boolean"
        },
        "require_code_owner_reviews": {
          "type": "boolean"
        },
        "require_last_push_approval": {
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "RequiredStatusChecks": {
      "additionalProperties": false,
      "properties": {
        "contexts": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "strict": {
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "RulesetConditionsConfig": {
      "additionalProperties": false,
      "properties": {
        "ref_name": {
          "$ref": "#/$defs/RefNameCondition"
        }
      },
      "type": "object"
    },
    "RulesetConfig": {
      "additionalProperties": false,
      "properties": {
        "bypass_actors": {
          "items": {
            "$ref": "#/$defs/BypassActorConfig"
          },
          "type": "array"
        },
        "conditions": {
          "$ref": "#/$defs/RulesetConditionsConfig"
        },
        "enforcement": {
          "enum": [
            "active",
            "disabled",
            "evaluate"
          ],
          "type": "string"
        },
        "name": {
          "minLength": 1,
          "type": "string"
        },
        "rules": {
          "$ref": "#/$defs/RulesetRulesConfig"
        },
        "target": {
          "enum": [
            "branch",
            "tag",
            "push"
          ],
          "type": "string"
        }
      },
      "required": [
        "name",
        "target",
        "enforcement"
      ],
      "type": "object"
    },
    "RulesetRulesConfig": {
      "additionalProperties": false,
      "properties": {
        "code_scanning": {
          "$ref": "#/$defs/CodeScanningRuleConfig"
        },
        "creation": {
          "type": "boolean"
        },
        "deletion": {
          "type": "boolean"
        },
        "non_fast_forward": {
          "type": "boolean"
        },
        "pull_request": {
          "$ref": "#/$defs/PullRequestRuleConfig"
        },
        "required_linear_history": {
          "type": "boolean"
        },
        "required_signatures": {
          "type": "boolean"
        },
        "required_status_checks": {
          "$ref": "#/$defs/StatusChecksRuleConfig"
        },
        "update": {
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "SecurityConfig": {
      "additionalProperties": false,
      "properties": {
        "dependabot_security_updates": {
          "enum": [
            "enabled",
            "disabled"
          ],
          "type": "string"
        },
        "secret_scanning": {
          "enum": [
            "enabled",
            "disabled"
          ],
          "type": "string"
        },
        "secret_scanning_push_protection": {
          "enum": [
            "enabled",
            "disabled"
          ],
          "type": "string"
        }
      },
      "type": "object"
    },
    "SettingsConfig": {
      "additionalProperties": false,
      "properties": {
        "exclude": {
          "items": {
            "minLength": 1,
            "type": "string"
          },
          "type": "array",
          "uniqueItems": true
        },
        "merge": {
          "items": {
            "$ref": "#/$defs/SettingsMergeConfig"
          },
          "type": "array"
        },
        "skip": {
          "default": false,
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "SettingsMergeConfig": {
      "additionalProperties": false,
      "properties": {
        "overrides": {
          "anyOf": [
            {
              "$ref": "#/$defs/SettingsOverride_RepositorySettingsConfig"
            },
            {
              "$ref": "#/$defs/SettingsOverride_FeaturesConfig"
            },
            {
              "$ref": "#/$defs/SettingsOverride_SecurityConfig"
            },
            {
              "$ref": "#/$defs/SettingsOverride_BranchProtectionRuleConfig"
            },
            {
              "$ref": "#/$defs/SettingsOverride_RulesetConfig"
            },
            {
              "description": "Custom override object for advanced use cases",
              "type": "object"
            }
          ],
          "description": "Override values to merge with org settings. Structure should match the section type (repository, features, security, branch protection rule, or ruleset). Only specified fields will override org defaults."
        },
        "section": {
          "examples": [
            "repository",
            "features",
            "security",
            "main",
            "release/*"
          ],
          "minLength": 1,
          "type": "string"
        },
        "strategy": {
          "default": "deep-merge",
          "enum": [
            "deep-merge",
            "shallow-merge",
            "overlay"
          ],
          "type": "string"
        }
      },
      "required": [
        "section",
        "overrides"
      ],
      "type": "object"
    },
    "SettingsOverride_BranchProtectionRuleConfig": {
      "additionalProperties": false,
      "description": "Partial BranchProtectionRuleConfig for merge overrides. Only specified fields will override org defaults.",
      "properties": {
        "allow_deletions": {
          "type": "boolean"
        },
        "allow_force_pushes": {
          "type": "boolean"
        },
        "enforce_admins": {
          "type": "boolean"
        },
        "pattern": {
          "minLength": 1,
          "type": "string"
        },
        "require_linear_history": {
          "type": "boolean"
        },
        "required_conversation_resolution": {
          "type": "boolean"
        },
        "required_reviews": {
          "$ref": "#/$defs/RequiredReviews"
        },
        "required_status_checks": {
          "$ref": "#/$defs/RequiredStatusChecks"
        },
        "restrictions": {
          "$ref": "#/$defs/BranchRestrictionsConfig"
        }
      },
      "type": "object"
    },
    "SettingsOverride_FeaturesConfig": {
      "additionalProperties": false,
      "description": "Partial FeaturesConfig for merge overrides. Only specified fields will override org defaults.",
      "properties": {
        "has_discussions": {
          "type": "boolean"
        },
        "has_issues": {
          "type": "boolean"
        },
        "has_projects": {
          "type": "boolean"
        },
        "has_wiki": {
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "SettingsOverride_RepositorySettingsConfig": {
      "additionalProperties": false,
      "description": "Partial RepositorySettingsConfig for merge overrides. Only specified fields will override org defaults.",
      "properties": {
        "allow_auto_merge": {
          "type": "boolean"
        },
        "allow_merge_commit": {
          "type": "boolean"
        },
        "allow_rebase_merge": {
          "type": "boolean"
        },
        "allow_squash_merge": {
          "type": "boolean"
        },
        "allow_update_branch": {
          "type": "boolean"
        },
        "delete_branch_on_merge": {
          "type": "boolean"
        },
        "squash_merge_commit_message": {
          "enum": [
            "PR_BODY",
            "COMMIT_MESSAGES",
            "BLANK"
          ],
          "type": "string"
        },
        "squash_merge_commit_title": {
          "enum": [
            "COMMIT_OR_PR_TITLE",
            "PR_TITLE"
          ],
          "type": "string"
        }
      },
      "type": "object"
    },
    "SettingsOverride_RulesetConfig": {
      "additionalProperties": false,
      "description": "Partial RulesetConfig for merge overrides. Only specified fields will override org defaults.",
      "properties": {
        "bypass_actors": {
          "items": {
            "$ref": "#/$defs/BypassActorConfig"
          },
          "type": "array"
        },
        "conditions": {
          "$ref": "#/$defs/RulesetConditionsConfig"
        },
        "enforcement": {
          "enum": [
            "active",
            "disabled",
            "evaluate"
          ],
          "type": "string"
        },
        "name": {
          "minLength": 1,
          "type": "string"
        },
        "rules": {
          "$ref": "#/$defs/RulesetRulesConfig"
        },
        "target": {
          "enum": [
            "branch",
            "tag",
            "push"
          ],
          "type": "string"
        }
      },
      "type": "object"
    },
    "SettingsOverride_SecurityConfig": {
      "additionalProperties": false,
      "description": "Partial SecurityConfig for merge overrides. Only specified fields will override org defaults.",
      "properties": {
        "dependabot_security_updates": {
          "enum": [
            "enabled",
            "disabled"
          ],
          "type": "string"
        },
        "secret_scanning": {
          "enum": [
            "enabled",
            "disabled"
          ],
          "type": "string"
        },
        "secret_scanning_push_protection": {
          "enum": [
            "enabled",
            "disabled"
          ],
          "type": "string"
        }
      },
      "type": "object"
    },
    "SmyklotConfig": {
      "additionalProperties": false,
      "properties": {
        "skip": {
          "default": false,
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "StatusCheckConfig": {
      "additionalProperties": false,
      "properties": {
        "context": {
          "minLength": 1,
          "type": "string"
        },
        "integration_id": {
          "type": "integer"
        }
      },
      "required": [
        "context"
      ],
      "type": "object"
    },
    "StatusChecksRuleConfig": {
      "additionalProperties": false,
      "properties": {
        "do_not_enforce_on_create": {
          "type": "boolean"
        },
        "required_status_checks": {
          "items": {
            "$ref": "#/$defs/StatusCheckConfig"
          },
          "type": "array"
        },
        "strict_required_status_checks_policy": {
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "SyncConfig": {
      "additionalProperties": false,
      "properties": {
        "sync": {
          "$ref": "#/$defs/SyncSettings"
        }
      },
      "type": "object"
    },
    "SyncSettings": {
      "additionalProperties": false,
      "properties": {
        "files": {
          "$ref": "#/$defs/FilesConfig"
        },
        "labels": {
          "$ref": "#/$defs/LabelsConfig"
        },
        "settings": {
          "$ref": "#/$defs/SettingsConfig"
        },
        "skip": {
          "default": false,
          "type": "boolean"
        },
        "smyklot": {
          "$ref": "#/$defs/SmyklotConfig"
        }
      },
      "type": "object"
    }
  },
  "$id": "https://raw.githubusercontent.com/smykla-labs/.github/main/schemas/sync-config.schema.json",
  "$ref": "#/$defs/SyncConfig",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Configuration for organization-wide label, file, and smyklot version synchronization. Place at .github/sync-config.yml in your repository.",
  "title": "Sync Configuration"
}
